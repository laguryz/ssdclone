# SSDクローン大作戦☆

## やることリスト

 - [ ] セキュアブート無効化
 - [ ] WinRE無効化
 - [ ] Clonezilla焼く
 - [ ] クローンする
 - [ ] Windowsのisoを焼く
 - [ ] 起動オプション修正
 - [ ] パーティション拡張
 - [ ] WinRE再構築&有効化
 - [ ] テスト

## 俺へ
先にブートエントリとドライブレター確認しろ

## 各手順

### セキュアブート無効化
**前提: 最初にやること**  
セキュアブートが入っているなら
通常の自作PCであればBIOSからオフにして一回起動するか確認するだけでOKのはず

### WinRE無効化
**前提: 最初にやること**  
WinREとはWindowsの回復環境(修復オプションとかのやつ)のこと  
後にカイフクパーティションを再作成するので先に無効化しておく  
しないと後でかなり面倒なことになる  
手順は[ここ](https://www.dell.com/support/kbdoc/ja-jp/000222496/windows-server-%E5%9B%9E%E5%BE%A9%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3%E3%82%B7%E3%83%A7%E3%83%B3-winre-%E9%A0%98%E5%9F%9F%E3%81%AE%E5%86%8D%E7%94%9F%E6%88%90%E6%96%B9%E6%B3%95)

### Clonezillaを焼く
**前提: 特になし**
[ここ](https://clonezilla.org/downloads/download.php?branch=stable)からamd64のzipをダウンロードする(isoじゃない方が楽)
UbuntuベースとDebianベースがあるが自分の環境ではUbuntuベースの方が使えなかったのでDebianベースがいいんじゃないかなあと思う
落としたら適当にzipを解凍して中身をfat32でフォーマットしたUSBディスクにコピーするだけ
EFIから直接起動できるのでddとかrufus使わなくていいっぽい

### クローンする
**前提: コピー元とコピー先のディスクだけにする**
**事故防止のために余計なディスクは外したほうがいい**
手順は[ここ](https://pc.watch.impress.co.jp/docs/topic/feature/1636746.html)
普通にデフォルト設定で文字読んでやるだけ
特に面倒な設定せずともディスク使用分だけコピーしてくれるので案外早く終わるかも
逆にAdvanced Mode使うといくつか面倒そうな設定がデフォルトで入るので何もしないほうがいいまでありそう

### Windowsのisoを焼く
**前提: 今まで使っていた起動構成に戻す**
**普通に元のWindows環境を使うのでPCを最初の状態に戻すこと**
これから先はWindowsのインストーラを使用して作業をするので起動ディスクを用意する
isoは用意してあると思うので[Rufus](https://rufus.ie/ja/)を使用してWindowsの.isoを焼く
RufusがWindowsのisoを認識すると加工する設定が出てくるが何も選択せず焼くこと(別にこのインストーラでインストールしないので)

### 起動オプション設定
**前提: 作業開始時はクローン先のSSDだけを繋ぐ**
**注意: SSD内のWindowsは起動しないこと(そもそも正常に動かないが)**
クローンしただけの状態では依然の起動構成を引き摺ってしまうので、新しい環境に合わせて手動で修正する
手順としては`BCDの設定`→`ブートエントリの編集`→`コピー元SSD以外を繋げて起動確認`って感じ
